machine:
  services:
    - rabbitmq-server

checkout:
  post:
    - git clone -b master git@github.com:stackstorm-exchange/ci.git ~/ci

dependencies:
  cache_directories:
    - ~/.cache/pip
    - ~/.apt-cache
  override:
    - ~/ci/.circle/dependencies

compile:
  override:
    - python ~/${CIRCLE_PROJECT_REPONAME}/setup.py install

test:
  override:
    # invoking tests of st2sdk
    - tox
    # invoking functional test for bootstrap command of st2sdk
    - .circle/test_creating_pack
